<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æŠ•è³‡ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:-apple-system;background:#f5f5f7;margin:12px}
.card{background:#fff;padding:14px;border-radius:12px;margin-bottom:12px}
h1,h2{text-align:center}
input,select,button{width:100%;padding:10px;margin-top:6px;font-size:16px}
button{background:#007aff;color:#fff;border:none;border-radius:10px}
canvas{width:100%;height:280px;border:1px solid #ccc;border-radius:8px}
#final{font-size:30px;font-weight:bold;text-align:center}
.small{font-size:13px;color:#555}
</style>
</head>

<body>

<h1>ğŸ“ˆ æŠ•è³‡ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>

<div class="card">
  <label>åˆæœŸæŠ•è³‡é¡ï¼ˆå††ï¼‰</label>
  <input id="initial" type="number" value="1000000">

  <label>æœˆé¡ç©ç«‹ï¼ˆå††ï¼‰</label>
  <input id="monthly" type="number" value="30000">

  <label>éŠ˜æŸ„</label>
  <select id="stock">
    <option value="0.05">ã‚ªãƒ«ã‚«ãƒ³ï¼ˆå…¨ä¸–ç•Œæ ªï¼‰</option>
    <option value="0.07">S&P500</option>
    <option value="0.09">NASDAQ100</option>
    <option value="0.04">é«˜é…å½“æ ª</option>
    <option value="0.08">æ—¥æœ¬æ ªï¼ˆä»»å¤©å ‚ï¼‰</option>
    <option value="0.06">æ—¥æœ¬æ ªï¼ˆä¸‰è±UFJï¼‰</option>
    <option value="0.06">æ—¥æœ¬æ ªï¼ˆä¸‰è±é›»æ©Ÿï¼‰</option>
  </select>

  <label>å£åº§ç¨®åˆ¥</label>
  <select id="account">
    <option value="nisa">æ–°NISAï¼ˆéèª²ç¨ï¼‰</option>
    <option value="tax">ç‰¹å®šå£åº§ï¼ˆç¨å¼•ãï¼‰</option>
  </select>

  <label>
    <input type="checkbox" id="crashOn" checked> æš´è½ã‚’åæ˜ 
  </label>

  <button onclick="simulate()">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
</div>

<div class="card">
  <h2>æœ€çµ‚è³‡ç”£ï¼ˆæ‰‹æ®‹ã‚Šï¼‰</h2>
  <div id="final">Â¥0</div>
</div>

<div class="card">
  <h2>è³‡ç”£æ¨ç§»ï¼ˆ1925ã€œ2025ï¼‰</h2>
  <canvas id="graph" width="350" height="280"></canvas>
  <p class="small">â€» æš´è½å¹´ã‚’ã‚¿ãƒƒãƒ—ã™ã‚‹ã¨èª¬æ˜ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</p>
</div>

<div class="card">
  <h2>ğŸ“‰ æš´è½ä¸€è¦§</h2>
  <button onclick="showCrash(1929)">ä¸–ç•Œææ…Œ</button>
  <button onclick="showCrash(1973)">ã‚ªã‚¤ãƒ«ã‚·ãƒ§ãƒƒã‚¯</button>
  <button onclick="showCrash(2000)">ITãƒãƒ–ãƒ«å´©å£Š</button>
  <button onclick="showCrash(2008)">ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯</button>
  <button onclick="showCrash(2020)">ã‚³ãƒ­ãƒŠã‚·ãƒ§ãƒƒã‚¯</button>
</div>

<script>
const crashInfo={
1929:"ä¸–ç•Œææ…Œï¼šæ ªä¾¡ã¯æœ€å¤§90%ä¸‹è½ã€‚å›å¾©ã¾ã§ç´„25å¹´ã‚’è¦ã—ãŸã€‚",
1973:"ã‚ªã‚¤ãƒ«ã‚·ãƒ§ãƒƒã‚¯ï¼šåŸæ²¹ä¾¡æ ¼æ€¥é¨°ã§ã‚¤ãƒ³ãƒ•ãƒ¬ã¨ä¸æ³ãŒåŒæ™‚ç™ºç”Ÿã€‚",
2000:"ITãƒãƒ–ãƒ«å´©å£Šï¼šNASDAQã¯ãƒ”ãƒ¼ã‚¯ã‹ã‚‰ç´„75%ä¸‹è½ã€‚",
2008:"ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ï¼šä¸–ç•ŒåŒæ™‚é‡‘èå±æ©Ÿã§æ ªä¾¡ã¯ç´„50%ä¸‹è½ã€‚",
2020:"ã‚³ãƒ­ãƒŠã‚·ãƒ§ãƒƒã‚¯ï¼šãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯ã«ã‚ˆã‚‹æ€¥è½ã¨æ€¥å›å¾©ã€‚"
};

function simulate(){
  const years=[];
  for(let y=1925;y<=2025;y++) years.push(y);

  let money=Number(initial.value);
  const monthlyAdd=Number(monthly.value)*12;
  const rate=Number(stock.value);
  const tax=account.value==="tax"?0.20315:0;
  const assets=[];

  years.forEach(y=>{
    if(crashOn.checked && crashInfo[y]) money*=0.7;
    money=(money+monthlyAdd)*(1+rate);
    assets.push(money);
  });

  const last=Math.round(assets.at(-1)*(1-tax));
  final.innerText="Â¥"+last.toLocaleString();
  drawGraph(assets);
}

function drawGraph(data){
  const c=document.getElementById("graph");
  const ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);

  const max=Math.max(...data);
  const pad=30;
  const w=c.width-pad*2;
  const h=c.height-pad*2;

  ctx.beginPath();
  ctx.moveTo(pad,pad);
  ctx.lineTo(pad,c.height-pad);
  ctx.lineTo(c.width-pad,c.height-pad);
  ctx.stroke();

  ctx.beginPath();
  data.forEach((v,i)=>{
    const x=pad+(i/(data.length-1))*w;
    const y=c.height-pad-(v/max)*h;
    i===0?ctx.moveTo(x,y):ctx.lineTo(x,y);
  });
  ctx.strokeStyle="#007aff";
  ctx.lineWidth=2;
  ctx.stroke();
}

function showCrash(y){
  alert(y+"å¹´\n"+crashInfo[y]);
}

simulate();
</script>

</body>
</html>
