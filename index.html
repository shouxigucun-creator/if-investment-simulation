<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>æŠ•è³‡ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ï¼ˆã‚ªãƒ•ãƒ©ã‚¤ãƒ³ï¼‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:-apple-system;background:#f5f5f7;margin:12px}
.card{background:#fff;padding:14px;border-radius:12px;margin-bottom:12px}
h1,h2{text-align:center}
input,select,button{width:100%;padding:10px;margin-top:6px;font-size:16px}
button{background:#007aff;color:#fff;border:none;border-radius:10px}
#final{font-size:30px;font-weight:bold;text-align:center}
canvas{width:100%;height:300px;border:1px solid #ccc;border-radius:8px}
.small{font-size:13px;color:#555}
</style>
</head>

<body>

<h1>ğŸ“ˆ æŠ•è³‡ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>

<div class="card">
  <label>åˆæœŸæŠ•è³‡é¡ï¼ˆå††ï¼‰</label>
  <input id="initial" type="number" value="1000000">

  <label>æœˆé¡ç©ç«‹ï¼ˆå††ï¼‰</label>
  <input id="monthly" type="number" value="30000">

  <label>å¹´åˆ©</label>
  <select id="rate">
    <option value="0.03">3%</option>
    <option value="0.05" selected>5%</option>
    <option value="0.07">7%</option>
    <option value="0.10">10%</option>
  </select>

  <label>
    <input type="checkbox" id="crashOn" checked> æš´è½ã‚’åæ˜ 
  </label>

  <button onclick="simulate()">ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</button>
</div>

<div class="card">
  <h2>æœ€çµ‚è³‡ç”£</h2>
  <div id="final">Â¥0</div>
</div>

<div class="card">
  <h2>è³‡ç”£æ¨ç§»ï¼ˆ1925ã€œ2025ï¼‰</h2>
  <canvas id="graph" width="350" height="300"></canvas>
  <p class="small">æ¨ªè»¸ï¼šå¹´ã€€ç¸¦è»¸ï¼šé‡‘é¡</p>
</div>

<script>
const crashes={
  1929:"ä¸–ç•Œææ…Œï¼šæ ªä¾¡90%ä¸‹è½ã€å›å¾©ã¾ã§25å¹´",
  2008:"ãƒªãƒ¼ãƒãƒ³ã‚·ãƒ§ãƒƒã‚¯ï¼šä¸–ç•Œé‡‘èå±æ©Ÿ",
  2020:"ã‚³ãƒ­ãƒŠã‚·ãƒ§ãƒƒã‚¯ï¼šãƒ‘ãƒ³ãƒ‡ãƒŸãƒƒã‚¯æš´è½"
};

function simulate(){
  const years=[];
  for(let y=1925;y<=2025;y++) years.push(y);

  let money=Number(initial.value);
  const monthlyAdd=Number(monthly.value)*12;
  const rate=Number(rate.value);
  const assets=[];

  years.forEach(y=>{
    if(crashOn.checked && crashes[y]) money*=0.7;
    money=(money+monthlyAdd)*(1+rate);
    assets.push(money);
  });

  final.innerText="Â¥"+Math.round(assets.at(-1)).toLocaleString();
  drawGraph(assets);
}

function drawGraph(data){
  const c=document.getElementById("graph");
  const ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);

  const max=Math.max(...data);
  const min=0;
  const pad=30;
  const w=c.width-pad*2;
  const h=c.height-pad*2;

  // è»¸
  ctx.beginPath();
  ctx.moveTo(pad,pad);
  ctx.lineTo(pad,c.height-pad);
  ctx.lineTo(c.width-pad,c.height-pad);
  ctx.stroke();

  // ç·š
  ctx.beginPath();
  data.forEach((v,i)=>{
    const x=pad+(i/(data.length-1))*w;
    const y=c.height-pad-((v-min)/(max-min))*h;
    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
  });
  ctx.strokeStyle="#007aff";
  ctx.lineWidth=2;
  ctx.stroke();
}

simulate();
</script>

</body>
</html>
